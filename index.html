<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Yg ke 2 dek</title>
    <link rel="stylesheet" href="./style.css">

  </head>
    
  <body>
  <script>

let user = null;

let posts = [];

// ğŸ”¹ LOGIN DENGAN CEK ADMIN DAN SIMPAN KE LOCALSTORAGE

function login(){

  const u = document.getElementById('userInput').value.trim();

  const p = document.getElementById('passInput').value.trim();

  if(!u || !p){ alert('Isi dulu bosku'); return; }

  // Admin login

  if(u === 'admin' && p === 'Pw000333000'){

    user = { username: 'admin', role: 'admin' };

  } 

  // User biasa

  else {

    user = { username: u, role: 'user' };

  }

  // Simpan ke localStorage biar gak ilang kalau di-refresh/minimize

  localStorage.setItem('user', JSON.stringify(user));

  tampilkanApp();

}

// ğŸ”¹ Fungsi buat nampilin halaman utama

function tampilkanApp(){

  document.getElementById('loginPage').style.display = 'none';

  document.getElementById('app').style.display = 'block';

  document.getElementById('profUser').innerText = "Username: " + user.username;

  document.getElementById('profRole').innerText = "Role: " + user.role;

}

// ğŸ”¹ Cek kalau user sudah pernah login sebelumnya

window.onload = function(){

  const saved = localStorage.getItem('user');

  if(saved){

    user = JSON.parse(saved);

    tampilkanApp();

  }

}

// ğŸ”¹ Navigasi antar halaman

function openPage(p){

  document.querySelectorAll('.page').forEach(pg => pg.classList.remove('show'));

  document.querySelectorAll('.navbtn').forEach(n => n.classList.remove('active'));

  if(p === 'home'){

    document.getElementById('homePage').classList.add('show');

    document.querySelectorAll('.navbtn')[0].classList.add('active');

    document.getElementById('topbar').style.display = 'flex';

  }

  if(p === 'upload'){

    document.getElementById('uploadPage').classList.add('show');

    document.querySelectorAll('.navbtn')[1].classList.add('active');

    document.getElementById('topbar').style.display = 'none';

  }

  if(p === 'profile'){

    document.getElementById('profilePage').classList.add('show');

    document.querySelectorAll('.navbtn')[2].classList.add('active');

    document.getElementById('topbar').style.display = 'none';

  }

}

// ğŸ”¹ Upload laporan scam

function uploadPost(){

  const n = document.getElementById('upName').value;

  const num = document.getElementById('upNum').value;

  const d = document.getElementById('upDesc').value;

  const files = document.getElementById('upImg') ? document.getElementById('upImg').files : [];

  if(!n || !num || !d){ alert('Lengkapi semua kolom'); return; }

  if(files.length > 10){ alert('Maksimal 10 gambar'); return; }

  let imgs = [];

  for(let i=0;i<files.length;i++){

    imgs.push(URL.createObjectURL(files[i]));

  }

  posts.push({

    name:n, 

    number:num, 

    desc:d, 

    imgs:imgs, 

    status:(user.role === 'admin' ? 'approved' : 'pending')

  });

  renderPosts();

  if(user.role === 'admin'){

    alert('Laporan langsung diterbitkan.');

  } else {

    alert('Laporan masuk, menunggu review admin.');

  }

}

// ğŸ”¹ Render postingan

function renderPosts(){

  let box = document.getElementById('posts');

  box.innerHTML = '';

  posts.forEach((p,i) => {

    let imgTags = '';

    if(p.imgs){ 

      p.imgs.forEach(src=>{

        imgTags += `<img src='${src}' style='width:100%;border-radius:8px;margin-top:6px;'/>`; 

      }); 

    }

    box.innerHTML += `

    <div class='card'>

      <h3>${p.name} ${p.status==='pending' ? '(Pending)' : ''}</h3>

      <p><b>Nomor:</b> ${p.number}</p>

      <p>${p.desc}</p>

      ${imgTags}

      ${user.role==='admin' ? `

        <button onclick='approve(${i})' class='btn' style='margin-top:10px;background:#2d7d46;'>Approve</button>

        <button onclick='reject(${i})' class='btn' style='margin-top:10px;background:#a12f2f;'>Hapus</button>` : ''}

    </div>`;

  });

}

// ğŸ”¹ Admin actions

function approve(i){ posts[i].status='approved'; renderPosts(); }

function reject(i){ posts.splice(i,1); renderPosts(); }

</script>
<footer style="

  text-align:center;

  font-size:13px;

  color:#aaa;

  padding:20px;

  background:#1a1b1e;

  margin-top:40px;

  border-top:1px solid #111;

  line-height:1.6;

">

  <p><b>AntiScam ID</b> dibuat untuk membantu mencegah penipuan (scam) di Indonesia dengan menyediakan

  informasi mengenai nomor dan identitas yang pernah dilaporkan terlibat dalam aktivitas ilegal.</p>

  

  <p>Jika Anda merasa data Anda muncul di sini padahal Anda tidak melakukan tindakan penipuan,

  atau Anda telah berhenti dari aktivitas tersebut namun identitas Anda masih tersebar,

  silakan hubungi admin melalui DM Instagram: <b>@pirmanww</b>.</p>

  

  <p>Admin akan memberikan instruksi dan syarat yang diperlukan untuk proses verifikasi data.

  Nomor WhatsApp admin saat ini tidak aktif.</p>

  <hr style="border:0; border-top:1px solid #333; margin:15px 0;">

  <p id="moralText" style="font-style:italic; color:#999; font-size:14px;"></p>

</footer>

<script>

  // Efek ketik pelan-pelan di bagian pesan moral

  const moral = "â€œRealita memang kejam, penuh tumpah darah â€” tapi dunia digital bisa membunuhmu tanpa menyentuh.â€";

  const moralEl = document.getElementById("moralText");

  let i = 0;

  function typeEffect(){

    if(i < moral.length){

      moralEl.innerHTML += moral.charAt(i);

      i++;

      setTimeout(typeEffect, 45); // kecepatan ketik (lebih kecil = lebih cepat)

    }

  }

  // Jalankan efek setelah halaman selesai dimuat

  window.addEventListener('load', typeEffect);

</script>
    <script  src="./script.js"></script>

  </body>
  
</html>
